{"ast":null,"code":"var _jsxFileName = \"C:\\\\Cursos\\\\Full\\\\marisol\\\\frontend\\\\gestionte\\\\src\\\\context\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext } from 'react';\nimport { setToken, getToken, removeToken } from \"../api/token\";\nimport { useUser } from '../hooks/';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  auth: undefined,\n  login: () => null,\n  logout: () => null\n});\nexport function AuthProvider(props) {\n  _s();\n\n  const {\n    children\n  } = props;\n  const [auth, setAuth] = useState(undefined);\n  const {\n    getMe\n  } = useUser();\n  useEffect(() => {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    (async () => {\n      const token = getToken();\n\n      if (token) {\n        const me = await getMe(token);\n        setAuth({\n          token,\n          me\n        });\n      } else {\n        setAuth(null);\n      }\n    })();\n  }, []);\n\n  const login = async token => {\n    setToken(token);\n    const me = await getMe(token);\n    setAuth({\n      token,\n      me\n    });\n  };\n\n  const logout = () => {\n    if (auth) {\n      removeToken();\n      setAuth(null);\n    }\n  };\n\n  const valueContext = {\n    auth,\n    login,\n    logout\n  };\n  if (auth === undefined) return null;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: valueContext,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthProvider, \"RGM/rL0uw8XeFcXO/ZdEMDGR26E=\", false, function () {\n  return [useUser];\n});\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useEffect","createContext","setToken","getToken","removeToken","useUser","AuthContext","auth","undefined","login","logout","AuthProvider","props","children","setAuth","getMe","token","me","valueContext"],"sources":["C:/Cursos/Full/marisol/frontend/gestionte/src/context/AuthContext.js"],"sourcesContent":["import React, { useState, useEffect, createContext } from 'react';\r\nimport { setToken, getToken, removeToken } from \"../api/token\";\r\nimport { useUser } from '../hooks/';\r\n\r\nexport const AuthContext = createContext({\r\n    auth: undefined,\r\n    login: () => null,\r\n    logout: () => null,\r\n});\r\n\r\nexport function AuthProvider(props){\r\n    const { children } = props;\r\n    const [auth, setAuth] = useState(undefined);\r\n    const { getMe } = useUser();\r\n\r\n    useEffect(() => {\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      (async ()=>{\r\n          const token = getToken();\r\n          if(token){\r\n            const me = await getMe(token);\r\n            setAuth({token, me})\r\n          }else{\r\n              setAuth(null)\r\n          }\r\n      })()\r\n    }, [])\r\n    \r\n\r\n    const login = async (token) =>{\r\n        setToken(token);\r\n        const me = await getMe(token);\r\n        setAuth({token, me});\r\n    }\r\n\r\n    const logout = () =>{\r\n        if(auth){\r\n            removeToken();\r\n            setAuth(null);\r\n        }\r\n    }\r\n\r\n    const valueContext = {\r\n        auth,\r\n        login,\r\n        logout,\r\n    };\r\n\r\n    if(auth === undefined) return null;\r\n    return (\r\n        <AuthContext.Provider value={valueContext}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,aAArC,QAA0D,OAA1D;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,WAA7B,QAAgD,cAAhD;AACA,SAASC,OAAT,QAAwB,WAAxB;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC;EACrCM,IAAI,EAAEC,SAD+B;EAErCC,KAAK,EAAE,MAAM,IAFwB;EAGrCC,MAAM,EAAE,MAAM;AAHuB,CAAD,CAAjC;AAMP,OAAO,SAASC,YAAT,CAAsBC,KAAtB,EAA4B;EAAA;;EAC/B,MAAM;IAAEC;EAAF,IAAeD,KAArB;EACA,MAAM,CAACL,IAAD,EAAOO,OAAP,IAAkBf,QAAQ,CAACS,SAAD,CAAhC;EACA,MAAM;IAAEO;EAAF,IAAYV,OAAO,EAAzB;EAEAL,SAAS,CAAC,MAAM;IACZ;IACF,CAAC,YAAU;MACP,MAAMgB,KAAK,GAAGb,QAAQ,EAAtB;;MACA,IAAGa,KAAH,EAAS;QACP,MAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAD,CAAtB;QACAF,OAAO,CAAC;UAACE,KAAD;UAAQC;QAAR,CAAD,CAAP;MACD,CAHD,MAGK;QACDH,OAAO,CAAC,IAAD,CAAP;MACH;IACJ,CARD;EASD,CAXQ,EAWN,EAXM,CAAT;;EAcA,MAAML,KAAK,GAAG,MAAOO,KAAP,IAAgB;IAC1Bd,QAAQ,CAACc,KAAD,CAAR;IACA,MAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAD,CAAtB;IACAF,OAAO,CAAC;MAACE,KAAD;MAAQC;IAAR,CAAD,CAAP;EACH,CAJD;;EAMA,MAAMP,MAAM,GAAG,MAAK;IAChB,IAAGH,IAAH,EAAQ;MACJH,WAAW;MACXU,OAAO,CAAC,IAAD,CAAP;IACH;EACJ,CALD;;EAOA,MAAMI,YAAY,GAAG;IACjBX,IADiB;IAEjBE,KAFiB;IAGjBC;EAHiB,CAArB;EAMA,IAAGH,IAAI,KAAKC,SAAZ,EAAuB,OAAO,IAAP;EACvB,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEU,YAA7B;IAAA,UACKL;EADL;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH;;GA5CeF,Y;UAGMN,O;;;KAHNM,Y"},"metadata":{},"sourceType":"module"}
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("date-fns/isValid"),t=require("format-string-by-pattern"),n=require("react"),r=require("react-fast-compare"),a=require("@date-fns/upgrade/v2/convertTokens"),o=require("date-fns/format"),l=require("date-fns/isBefore"),i=require("date-fns/parse"),c=require("date-fns/startOfDay"),d=require("dayzed"),u=require("date-fns/compareAsc"),s=require("date-fns/isSameDay"),f=require("classnames"),p=require("semantic-ui-react");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=h(e),g=h(t),v=h(n),y=h(r),b=h(o),k=h(l),D=h(i),C=h(c),w=h(d),E=h(u),O=h(s),R=h(f);function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,P(e,t)}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function M(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(a[n]=e[n]);return a}var x=function(e,t,n){return!(t&&k.default(e,t)||n&&k.default(n,e))},F=function(e,t){var n=new Date;return{date:C.default(n),nextMonth:!1,prevMonth:!1,selectable:x(n,e,t),selected:!1,today:!0}},V=function(e,t,n){return e?b.default(C.default(e),a.convertTokens(t),n):void 0},q=function(e,t,n){return e?Array.isArray(e)?e.map((function(e){return V(e,t,n)})).join(" - "):V(e,t,n):""},B=function(e){return e.replace(/[D, Y]/gi,(function(e){return e.toLowerCase()}))},A=function(e,t){return D.default(e,B(t),new Date)},N=function(e,t){var n=B(t);return e.split(" - ").map((function(e){return D.default(e,n,new Date)})).sort((function(e,t){return e>t?1:-1}))},K=function(e){return void 0===e&&(e=""),e.replace(/[^\d]/g,"")};function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return t&&t.apply(void 0,[e].concat(r)),e.defaultPrevented}))}}function T(e){return function(t){var n={37:e.left,39:e.right,38:e.up,40:e.down}[t.keyCode];n&&n(t)}}function _(e,t){return 2===e.length&&e[0]<=t&&e[1]>=t}var L=["refKey"],z=["children"],H=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={offset:0},t.rootNode=v.default.createRef(),t.handleArrowKeys=T({left:function(){return t.getKeyOffset(-1)},right:function(){return t.getKeyOffset(1)},up:function(){return t.getKeyOffset(-7)},down:function(){return t.getKeyOffset(7)}}),t.getRootProps=function(e){var n,r=void 0===e?{}:e,a=r.refKey,o=void 0===a?"ref":a,l=M(r,L);return S(((n={})[o]=t.rootNode,n.onKeyDown=t.handleArrowKeys,n),l)},t._handleOffsetChanged=function(e){t.setState({offset:e})},t}I(t,e);var n=t.prototype;return n.getKeyOffset=function(e){if(this.rootNode.current){var t=document.activeElement,n=Array.from(this.rootNode.current.querySelectorAll("button:not(:disabled)"));n.some((function(r,a){var o=a+e;return r===t&&(o<=n.length-1&&o>=0?(n[o].focus(),!0):(n[0].focus(),!0))}))}},n.componentDidUpdate=function(e){this.props.date!==e.date&&this._handleOffsetChanged(0)},n.render=function(){var e=this,t=this.props,n=t.children,r=M(t,z);return v.default.createElement(w.default,S({},r,{offset:this.state.offset,onOffsetChanged:this._handleOffsetChanged,render:function(t){return n(S({},t,{getRootProps:e.getRootProps}))}}))},t}(v.default.Component),Y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._handleOnDateSelected=function(e,n){var r=e.date,a=t.props,o=a.clearOnSameDateClick,l=a.selected,i=a.onChange;if(e.selectable){var c=r;l&&l.getTime()===r.getTime()&&o&&(c=null),i&&i(n,c)}},t}return I(t,e),t.prototype.render=function(){return v.default.createElement(H,S({},this.props,{onDateSelected:this._handleOnDateSelected}))},t}(v.default.Component),U=["onMouseEnter","onFocus"],W=["children"],G=["getRootProps","getDateProps"],J=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={hoveredDate:null},t.setHoveredDate=function(e){t.setState((function(t){return t.hoveredDate===e?null:{hoveredDate:e}}))},t.onMouseLeave=function(){t.setHoveredDate(null)},t._handleOnDateSelected=function(e,n){var r=e.date,a=t.props,o=a.selected,l=a.onChange;if(e.selectable){var i=r.getTime(),c=[].concat(o);o.length?1===o.length?o[0].getTime()<i?c.push(r):c.unshift(r):2===c.length&&(c=[r]):c.push(r),l&&l(n,c),2===c.length&&t.setHoveredDate(null)}},t.getEnhancedDateProps=function(e,n,r){var a=r.onMouseEnter,o=r.onFocus,l=M(r,U),i=t.state.hoveredDate,c=l.dateObj.date;return e(S({},l,{inRange:_(n,c),start:n[0]&&O.default(n[0],c),end:n[1]&&O.default(n[1],c),hovered:i&&O.default(i,c),onMouseEnter:j(a,(function(){t.onHoverFocusDate(c)})),onFocus:j(o,(function(){t.onHoverFocusDate(c)}))}))},t.getEnhancedRootProps=function(e,n){return e(S({},n,{onMouseLeave:t.onMouseLeave}))},t}I(t,e);var n=t.prototype;return n.onHoverFocusDate=function(e){1===this.props.selected.length&&this.setHoveredDate(e)},n.render=function(){var e=this,t=this.props,n=t.children,r=M(t,W),a=this.state.hoveredDate,o=this.props.selected,l=2!==o.length&&o.length&&a?[o[0],a].sort(E.default):o;return v.default.createElement(H,S({},r,{onDateSelected:this._handleOnDateSelected}),(function(t){var r=t.getRootProps,a=t.getDateProps,o=M(t,G);return n(S({},o,{getRootProps:e.getEnhancedRootProps.bind(e,r),getDateProps:e.getEnhancedDateProps.bind(e,a,l)}))}))},t}(v.default.Component);J.defaultProps={selected:[]};var Q=["icon"],X=function(e){var t=e.icon,n=M(e,Q);return v.default.createElement(p.Button,S({basic:!0,compact:!0,icon:t},n))};function Z(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}Z(".clndr-cell{background-color:#fff;border:none;color:inherit;cursor:pointer;font-family:inherit;height:30px;padding:5px 0;transition:all .2s}.clndr-cell.inverted{background-color:#4f4f4f}.clndr-cell.inverted:hover{background-color:#757575;color:inherit}.clndr-cell:hover{background-color:#cacbcd;color:inherit}.clndr-cell-today{background-color:#e0e1e2}.clndr-cell-inrange{background-color:#cacbcd;color:inherit}.clndr-cell-inrange.inverted{background-color:#757575;color:inherit}.clndr-cell-disabled{cursor:default;opacity:.45}.clndr-cell-disabled:hover{background-color:#fff}.clndr-cell-disabled.inverted:hover{background-color:#4f4f4f;color:inherit}.clndr-cell-selected{background-color:#4f4f4f;color:#f2f2f2}.clndr-cell-selected.inverted{background-color:#fff;color:#000}.clndr-cell-other-month{color:#d9d9d9}.clndr-cell-other-month.inverted{color:#a6a6a6}");var $=["children","end","hovered","inRange","inverted","nextMonth","prevMonth","selectable","selected","start","today"],ee=function(e){var t=e.children,n=e.inRange,r=e.inverted,a=e.nextMonth,o=e.prevMonth,l=e.selectable,i=e.selected,c=e.today,d=M(e,$),u=R.default("clndr-cell",{inverted:r,"clndr-cell-today":c,"clndr-cell-disabled":!l,"clndr-cell-other-month":a||o,"clndr-cell-inrange":n,"clndr-cell-selected":i});return t?v.default.createElement("button",S({className:u,disabled:!l},d),t):v.default.createElement("span",S({className:u,tabIndex:t?0:-1},d),t)};ee.defaultProps={end:!1,hovered:!1,inRange:!1,nextMonth:!1,prevMonth:!1,start:!1};var te=["aria-label","children","end","hovered","inRange","nextMonth","prevMonth","selectable","selected","start","today"],ne={marginTop:10},re=function(e){var t=e["aria-label"],n=e.children,r=M(e,te);return v.default.createElement(p.Button,S({"aria-label":t+", "+n,className:"clndr-button-today",compact:!0,"data-testid":"datepicker-today-button",fluid:!0,style:ne},r),n)};Z(".clndr-calendars-segment{margin-bottom:.25rem!important;margin-top:.25rem!important;text-align:center}.clndr-calendars-segment.clndr-floating{position:absolute!important;z-index:2000}.clndr-calendars-wrapper{grid-gap:1em;display:grid;grid-template-columns:repeat(var(--n,1),1fr)}.clndr-control{align-items:center;display:grid;grid-template-columns:repeat(3,1fr);margin-bottom:10px}.clndr-days{grid-gap:1px;background-color:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);border-radius:.28571429rem;display:grid;grid-template-columns:repeat(7,minmax(2.2rem,1fr));overflow:hidden;text-align:center}.clndr-left{left:0}.clndr-right{right:0}.clndr-top{bottom:100%}.clndr-bottom{top:100%}.clndr-calendars-segment.clndr-top{box-shadow:0 -1px 2px 0 rgba(34,36,38,.15)!important;margin-bottom:.25rem!important}");var ae=["ref"],oe={leftBtn:{textAlign:"start"},rightBtn:{textAlign:"end"}},le={"top left":"clndr-top clndr-left","top right":"clndr-top clndr-right",left:"clndr-left",right:"clndr-right"},ie=function(e){var t,r=e.calendars,a=e.filterDate,o=e.getBackProps,l=e.getDateProps,i=e.getForwardProps,c=e.inline,d=e.inverted,u=e.maxDate,s=e.minDate,f=e.months,h=e.nextMonth,m=e.nextYear,g=e.previousMonth,y=e.previousYear,k=e.showToday,D=e.todayButton,C=e.weekdays,w=e.pointing,E=(0,e.getRootProps)(),O=E.ref,I=M(E,ae),P=n.useRef(),x=function(e){P.current=e.target.getAttribute("aria-label")};return n.useEffect((function(){if(P.current){var e=document.querySelector('[aria-label="'+P.current+'"]');e&&document.activeElement!==e&&e.focus()}})),v.default.createElement(p.Ref,{innerRef:O},v.default.createElement(p.Segment,S({},I,{inverted:d,className:R.default("clndr-calendars-segment",(t={"clndr-floating":!c},t[le[w]]=!c,t))}),v.default.createElement("div",{className:"clndr-calendars-wrapper",style:{"--n":r.length}},r.map((function(e,t){return v.default.createElement("div",{key:e.year+"-"+e.month},v.default.createElement("div",{className:"clndr-control"},v.default.createElement("div",{style:oe.leftBtn},0===t&&v.default.createElement(n.Fragment,null,v.default.createElement(X,S({icon:"angle double left",inverted:d,title:y},o({calendars:r,"aria-label":y,offset:12,onClick:x}))),v.default.createElement(X,S({icon:"angle left",inverted:d,style:{marginRight:0},title:g},o({calendars:r,"aria-label":g,onClick:x}))))),v.default.createElement("span",{title:f[e.month]+" "+e.year},f[e.month].slice(0,3)," ",e.year),v.default.createElement("div",{style:oe.rightBtn},t===r.length-1&&v.default.createElement(n.Fragment,null,v.default.createElement(X,S({icon:"angle right",inverted:d,title:h},i({calendars:r,"aria-label":h,onClick:x}))),v.default.createElement(X,S({icon:"angle double right",inverted:d,style:{marginRight:0},title:m},i({calendars:r,"aria-label":m,offset:12,onClick:x})))))),v.default.createElement("div",{className:"clndr-days"},C.map((function(t){return v.default.createElement(ee,{key:e.year+"-"+e.month+"-"+t,inverted:d,"aria-label":t,title:t},t.slice(0,2))})),e.weeks.map((function(t){return t.map((function(t,n){var r=e.year+"-"+e.month+"-"+n;if(!t)return v.default.createElement(ee,{key:r,inverted:d});var o=t.selectable&&a(t.date),i=function(e){if(e)return b.default(e,"yyyy-MM-dd")}(t.date);return v.default.createElement(ee,S({key:r},t,l({dateObj:S({},t,{selectable:o}),onClick:x}),{"data-testid":"datepicker-cell-"+i,inverted:d,selectable:o}),t.date.getDate())}))}))))}))),k&&v.default.createElement(re,S({inverted:d},F(s,u),l({dateObj:F(s,u),onClick:x})),D)))},ce=function(e){var t=e.clearIcon,n=e.icon,r=e.isClearIconVisible,a=e.onClear;return r&&t&&v.default.isValidElement(t)?v.default.cloneElement(t,{"data-testid":"datepicker-clear-icon",onClick:a}):r&&t&&!v.default.isValidElement(t)?v.default.createElement(p.Icon,{"aria-pressed":"false","data-testid":"datepicker-clear-icon",link:!0,name:t,onClick:a}):n&&v.default.isValidElement(n)?v.default.cloneElement(n,{"data-testid":"datepicker-icon"}):v.default.createElement(p.Icon,{"data-testid":"datepicker-icon",name:n})},de=["clearIcon","error","icon","isClearIconVisible","label","onClear","onFocus","required","value"],ue={"data-testid":"datepicker-input"},se=v.default.forwardRef((function(e,t){var n=e.clearIcon,r=e.error,a=e.icon,o=e.isClearIconVisible,l=e.label,i=e.onClear,c=e.onFocus,d=e.required,u=e.value,s=M(e,de);return v.default.createElement(p.Form.Field,{error:r,required:d},l&&v.default.createElement("label",{htmlFor:s.id},l),v.default.createElement(p.Input,S({},s,{ref:t,error:r,required:d,icon:v.default.createElement(ce,{clearIcon:n,icon:a,isClearIconVisible:o,onClear:i}),input:ue,onFocus:c,value:u})))})),fe={display:"inline-block",position:"relative"},pe=["autoComplete","autoFocus","className","clearIcon","disabled","error","icon","iconPosition","id","label","loading","name","onBlur","onChange","onClick","onContextMenu","onDoubleClick","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","placeholder","required","size","tabIndex","transparent","readOnly"],he=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).el=v.default.createRef(),t.inputRef=v.default.createRef(),t.state=t.initialState,t.Component=t.isRangeInput?J:Y,t.resetState=function(e){var n=t.props,r=n.keepOpenOnClear,a=n.onChange,o={isVisible:r,selectedDate:t.isRangeInput?[]:null,selectedDateFormatted:""};r&&t.focusOnInput(),t.setState(o,(function(){a(e,S({},t.props,{value:null}))}))},t.clearInput=function(e){t.resetState(e)},t.mousedownCb=function(e){t.state.isVisible&&t.el&&t.el.current&&!t.el.current.contains(e.target)&&t.close()},t.keydownCb=function(e){27===e.keyCode&&t.state.isVisible&&t.close()},t.close=function(){window.removeEventListener("keydown",t.keydownCb),window.removeEventListener("mousedown",t.mousedownCb),t.setState({isVisible:!1})},t.focusOnInput=function(){var e;if(null!=(e=t.inputRef)&&e.current){var n=t.inputRef.current;document.activeElement!==n.inputRef.current&&(0,n.focus)()}},t.showCalendar=function(e){(0,t.props.onFocus)(e),window.addEventListener("mousedown",t.mousedownCb),window.addEventListener("keydown",t.keydownCb),t.focusOnInput(),t.setState({isVisible:!0})},t.handleRangeInput=function(e,n){var r=t.props,a=r.keepOpenOnSelect,o=r.onChange;if(e&&e.length){var l={selectedDate:e,selectedDateFormatted:q(e,r.format,r.formatOptions),typedValue:null};t.setState(l,(function(){o(n,S({},t.props,{value:e})),2===e.length&&t.setState({isVisible:a})}))}else t.resetState(n)},t.handleBasicInput=function(e,n){var r=t.props,a=r.onChange;if(e){var o={isVisible:r.keepOpenOnSelect,selectedDate:e,selectedDateFormatted:q(e,r.format,r.formatOptions),typedValue:null};t.setState(o,(function(){a(n,S({},t.props,{value:e}))}))}else t.resetState(n)},t.handleBlur=function(e){var n=t.props,r=n.format,a=n.onChange,o=t.state.typedValue;if(e&&(0,n.onBlur)(e),o){if(t.isRangeInput){var l=N(String(o),r);if(l.every(m.default))return void t.handleRangeInput(l,e)}else{var i=A(String(o),r);if(m.default(i))return void t.handleBasicInput(i,e)}t.setState({typedValue:null},(function(){a(e,S({},t.props,{value:null}))}))}},t.handleChange=function(e,n){var r=n.value,a=t.props,o=a.format,l=a.onChange,i=t.isRangeInput?o+" - "+o:o,c=a.allowOnlyNumbers?K(r):r;c?t.setState({selectedDate:t.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:g.default(i,c)}):t.setState({selectedDate:t.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:null},(function(){l(e,S({},t.props,{value:null}))}))},t.handleKeyDown=function(e){13===e.keyCode&&t.handleBlur()},t.onDateSelected=function(e,n){t.isRangeInput?t.handleRangeInput(n,e):t.handleBasicInput(n,e)},t}I(t,e);var n,r,a=t.prototype;return a.componentDidUpdate=function(e){var t=this.props,n=t.locale,r=t.value;y.default(r,e.value)||this.onDateSelected(void 0,r),n!==e.locale&&this.setState({locale:this.locale})},a.render=function(){var e=this,t=this.state,n=t.isVisible,r=t.locale,a=t.selectedDateFormatted,o=t.typedValue,l=this.props,i=l.clearable,c=l.pointing,d=l.filterDate,u=l.inline,s=l.inverted,f=l.readOnly,p=l.datePickerOnly,h=v.default.createElement(this.Component,S({},this.dayzedProps,{monthsToDisplay:this.isRangeInput?2:1,onChange:this.onDateSelected,selected:t.selectedDate,date:this.date}),(function(t){return v.default.createElement(ie,S({},e.dayzedProps,t,r,{filterDate:d,inverted:s,pointing:c,weekdays:e.weekdays}))}));return u?h:v.default.createElement("div",{className:"field",style:fe,ref:this.el},v.default.createElement(se,S({},this.inputProps,{isClearIconVisible:Boolean(i&&a),onBlur:this.handleBlur,onChange:this.handleChange,onClear:this.clearInput,onFocus:f?null:this.showCalendar,onKeyDown:this.handleKeyDown,readOnly:f||p,ref:this.inputRef,value:o||a})),n&&h)},n=t,(r=[{key:"isRangeInput",get:function(){return"range"===this.props.type}},{key:"initialState",get:function(){var e=this.props,t=e.value;return{isVisible:!1,locale:this.locale,selectedDate:t||(this.isRangeInput?[]:null),selectedDateFormatted:q(t,e.format,e.formatOptions),typedValue:null}}},{key:"dayzedProps",get:function(){return e=pe,t=S({},this.props),e.forEach((function(e){return delete t[e]})),t;var e,t}},{key:"inputProps",get:function(){var e,t,n=(e=this.props,t={},pe.forEach((function(n){t[n]=e[n]})),t);return S({},n,{placeholder:void 0!==n.placeholder?n.placeholder:this.props.format})}},{key:"date",get:function(){var e=this.state.selectedDate,t=this.props.date;return t||!e?t:this.isRangeInput?e[0]:e}},{key:"locale",get:function(){var e,t=this.props.locale;try{e=require("./locales/"+t+".json")}catch(n){console.warn('"'+t+'" is not a valid locale'),e=require("./locales/en-US.json")}return e}},{key:"weekdays",get:function(){var e,t;return(t=this.state.locale.weekdays).slice(e=this.dayzedProps.firstDayOfWeek).concat(t.slice(0,e))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(v.default.Component);he.defaultProps={allowOnlyNumbers:!1,autoFocus:!1,clearIcon:"close",clearOnSameDateClick:!0,clearable:!0,date:void 0,filterDate:function(){return!0},firstDayOfWeek:0,format:"YYYY-MM-DD",icon:"calendar",id:void 0,inline:!1,keepOpenOnClear:!1,keepOpenOnSelect:!1,label:void 0,locale:"en-US",name:void 0,onBlur:function(){},onChange:function(){},onFocus:function(){},placeholder:void 0,pointing:"left",readOnly:!1,datePickerOnly:!1,required:!1,showToday:!0,showOutsideDays:!1,type:"basic",value:null,inverted:!1},exports.default=he;
//# sourceMappingURL=react-semantic-ui-datepickers.cjs.production.min.js.map
